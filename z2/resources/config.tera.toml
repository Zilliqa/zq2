p2p_port = 3333

bootstrap_address = {{ bootstrap_address }}

[[nodes]]
eth_chain_id = {{ eth_chain_id }}
allowed_timestamp_skew = { secs = 60, nanos = 0 }
data_dir = "/data"
consensus.genesis_accounts = [ ["{{ genesis_address }}", "900_000_000_000_000_000_000_000_000" ] ]
consensus.genesis_deposits = [ ["{{ validator_bls_public_key }}", "{{ validator_peer_id }}", "20_000_000_000_000_000_000_000_000", "0x0000000000000000000000000000000000000000", "{{ genesis_address }}"] ]
{%- if staker_withdrawal_period %}
consensus.staker_withdrawal_period = {{ staker_withdrawal_period }}
{%- endif %}

# Reward parameters
consensus.rewards_per_hour = "51_000_000_000_000_000_000_000"
consensus.blocks_per_hour = 3600
consensus.minimum_stake = "10_000_000_000_000_000_000_000_000"
# Gas parameters
consensus.eth_block_gas_limit = 84000000
consensus.gas_price = "4_761_904_800_000"
consensus.scilla_call_gas_exempt_addrs = {{ whitelisted_evm_contract_addresses }}
{%- if contract_upgrade_block_heights %}
consensus.contract_upgrade_block_heights = {{ contract_upgrade_block_heights }}
{%- endif %}

{%- if role == "checkpoint" %}
# Checkpoint configuration
do_checkpoints=true
consensus.blocks_per_epoch=3600
consensus.epochs_per_checkpoint=24
{%- endif %}

api_servers = {{ api_servers }}

{%- if enable_ots_indices %}
enable_ots_indices = true
{%- endif %}

{%- if checkpoint_file %}
[nodes.load_checkpoint]
file = "{{ checkpoint_file }}"
hash = "{{ checkpoint_hash }}"
{%- endif %}

{%- if genesis_fork %}
consensus.genesis_fork = {{ genesis_fork }}
{%- endif %}

{%- if forks %}
consensus.forks = [
    {%- for fork in forks %}
    {{ fork }},
    {%- endfor %}
]
{%- endif %}
